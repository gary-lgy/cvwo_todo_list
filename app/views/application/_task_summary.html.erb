<%# local variables: task %>

<%# display the task in a Bootstrap 'card' entity %>
<div class="card mb-4<%= ' completed' if task.completed? %>">
  <%# empty/ticked circle, task title, status %>
  <div class="card-header row">
    <div class="col-1">
      <%= toggle_complete_icon task %>
    </div>
    <div class="col-11">
      <h5 class="d-inline font-weight-bold"><%= task.title %></h5>
      <%= status_icon task %>
    </div>
  </div>

  <%# description, deadline, tags %>
  <div class="card-body">
    <% if task.description.present? %>
      <p>
        <%= description_icon %>
        <%= task.description %>
      </p>
    <% end %>

    <% if task.deadline.present? %>
      <p>
        <%= deadline_icon %>
        <%= utc_to_user_time(task.deadline).friendly_format %>
        <% if  task.overdue? %>
          <span class="text-danger">
            <%= ' ' + time_ago_in_words(task.deadline) + ' ago' %>
          </span>
        <% elsif task.urgent? %>
          <span class="text-danger">
            <%= ' ' + distance_of_time_in_words_to_now(task.deadline) + ' later'%>
          </span>
        <% end %>
      </p>
    <% end %>

    <% if task.tags.any? %>
      <div>
        <%= tag_icon %>
        <div id="tags" class="d-inline">
          <% task.tags.each do |tag| %>
            <%= tag_button(tag) %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <%# edit, delete %>
  <div class="card-footer">
    <%= render 'nav_links', task: task %>
  </div>
</div>
